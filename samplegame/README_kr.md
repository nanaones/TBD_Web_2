# SampleGame
블랙잭 게임을 참고하여 구현. 
게임의 기본룰
  - 최대 5 장의 카드를 뽑은 후, 카드의 합이 21 에 가까운 사람이 승자
  - 21 을 넘으편 패배. 

기능 요구 사항 

게임 칩 발행 및 환전
- mint_chips 메소드를 통해 기존에 배포되어 있는 Chip 스코어의 mint 메소드를 호출하여 칩 발행
- mint_chips: icx 전송 가능. 전송된 icx의 양을 바탕으로 칩 발행.
- exchange 메소드를 통해 기존에 배포되어 있는 Chip 스코어의 exchange 메소드를 호출하여 환전
- exchange: 입력 파라미터로 환전하고자 하는 칩의 양을 입력받아 icx로 환전.

게임방 관리 기능 
- 게임방 생성 / 목록 조회 / 참가 / 나가기 / 삭제
- 각 게임방은 유니크한 아이디(생성자 주소)를 가진다. 해당 아이디는 생성시 시스템이 자동으로 생성한다. 
- 게임방은 아래와 같은 정보를 관리한다. 조회시 보여지는 정보. 
    - 방장 & 게임룸 아이디 (생성자 주소), 생성 시간 (블록 높이), 게임 진행 여부 상태,  참가 가능 여부 : 시스템이 자동 생성 및 관리
    - 한판당 상금 : 게임방 생성자가 방 생성시 입력 (기본값 : 10 icx). 생성 이후 수정 불가능.
- 게임방 생성자가 방장이 된다. 
- 방장이 나가면 게임방은 삭제된다. 게임이 진행중이지 않은 상태 & 게임방에 방장 외 참여인원이 없는 상태에서만 나갈 수 있다.
- 게임방에 참여할 수 있는 인원은 방장을 포함하여 최대 2명이다.

참여자 
- 참여자는 방장과, 플레이어 두 종류가 있다.
- 참여자 아이디는 지갑 주소를 사용한다.
- 참여자 정보 : ready 여부, 토큰 balance
    - ready 여부는 본인이 설정한다. (true <-> false) 
    - 모든 참여자의 ready == true 여야 게임 시작가능하다.
- 참여자는 한번에 하나의 방에만 들어갈 수 있다. 
- 참여자는 게임방을 선택하여 참가 / 나가기 가능 
    - 해당 방에 이미 2명이면 참가 불가
    - balance 가 상금보다 적으면 참가 불가 


게임
- 게임 시작 
    - 방장이 시작한다.
    - 참여자가 모두 ready 상태여야 한다.
    - 게임이 시작되면 참여자의 ready == false 로 변경된다.


- 게임 종료 
    - 두명의 플레이어가 모두 5장의 카드를 가지거나, 플레이어 모두 fix == true 이면 게임 종료.
    - 한 명의 카드 총합이 21 이상이면 게임 종료.
    - 일정 시간 동안 진행이 안되면 게임은 강제 종료 된다.
    - 게임 종료 후 참여자는 방에 남아 있는 상태이다. 스스로 명시적으로 exit 해야 한다.
    - 게임 종료 후 balance 가 베팅금보다 적은 경우는 자동으로 exit 처리된다. 

- 게임 진행
  - 게임 참여자는 최대 5장의 카드를 가질 수 있다. 
  - 게임이 시작되면, 각자 최대 5장의 카드를 뽑는다
  - 본인이 가진 카드 조회 가능, fix를 통해 5장보다 적은 상태에서 카드를 확정할 수 있음.

- 게임이 완료되면, 승자에게 양측의 베팅금이 모두 전달된다. 비기는 경우, 각자 베팅금을 돌려받는다. 
- 게임 종료 후 방장은 다시 게임을 시작할 수 있다. 


구현

스코어 
- chip (irc2 token) 
- samplegame : 블랙잭 로직 구현

class 
- samplegame : 메인 로직 

  - deck : 카드 뭉치 52 개의 카드 
  - card : 카드 한장 
  - hand : 플레이어의 손. 플레이어가 가지고 있는 카드를 표현한다.
  - gameroom : 게임방 
